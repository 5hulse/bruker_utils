
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Reference &#8212; bruker_utils  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Using bruker_utils" href="usage.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="bruker_utils.parse_jcampdx">
<span class="sig-prename descclassname"><span class="pre">bruker_utils.</span></span><span class="sig-name descname"><span class="pre">parse_jcampdx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_numerical_values</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#bruker_utils.parse_jcampdx" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve parameters from files written in JCAMP-DX format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The path to the parameter file.</p></li>
<li><p><strong>convert_numerical_values</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all values which can be converted to numerical objects
(<code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code>) will be converted from <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>params</strong> – Parameters in the file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">path</span></code> does not exist in the filesystem.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>There are two different parameters types which are stored in these files.
One is for single values, and the other is for arrayed values.</p>
<p>Single-valued parameters are denoted like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>##$SW_h= 5494.50549450549
</pre></div>
</div>
<p>These will appear in <code class="docutils literal notranslate"><span class="pre">params</span></code> as follows:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">,</span> <span class="s1">&#39;SW_h&#39;</span><span class="p">:</span> <span class="mf">5494.50549450549</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>Arrayed values are denoted like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>##$P= (0..63)
10.8 10.8 21.6 0 0 19.8 30 60 20000 0 0 80000 80000 0 0
200000 1000 2500 10000 600 2500 0 0 0 0 250 0 10.8 1000
1200 0 0 0 0 0 0 0 0 0 0 0 0 0 0
</pre></div>
</div>
<p>Each value in the array is separated by either a space or a newline. The
values are stored in a list:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">,</span>
 <span class="s1">&#39;P&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.8</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">,</span> <span class="mf">21.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">19.8</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
       <span class="mi">80000</span><span class="p">,</span> <span class="mi">80000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2500</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span>
       <span class="mi">2500</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
       <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bruker_utils</span> <span class="k">as</span> <span class="nn">butils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/path/to/.../file&#39;</span> <span class="c1"># Can be relative or absolute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="n">butils</span><span class="o">.</span><span class="n">parse_jcampdx</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">:  </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">ACQT0:  -2.26890760309556</span>
<span class="go">AMP:  [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,</span>
<span class="go">       100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,</span>
<span class="go">       100, 100, 100, 100, 100, 100, 100, 100, 100, 100]</span>
<span class="go">AMPCOIL:  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</span>
<span class="go">           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span>
<span class="go">AQSEQ:  0</span>
<span class="go">AQ_mod:  3</span>
<span class="go">AUNM:  &lt;au_zg&gt;</span>
<span class="go">AUTOPOS:  &lt;&gt;</span>
<span class="go">BF1:  500.13</span>
<span class="go">BF2:  500.13</span>
<span class="go">BF3:  500.13</span>
<span class="go">BF4:  500.13</span>
<span class="go">BF5:  500.13</span>
<span class="go">BF6:  500.13</span>
<span class="go">BF7:  500.13</span>
<span class="go">BF8:  500.13</span>
<span class="go">--snip--</span>
<span class="go">YMAX_a:  5188289</span>
<span class="go">YMIN_a:  -3815309</span>
<span class="go">ZGOPTNS:  &lt;&gt;</span>
<span class="go">ZL1:  120</span>
<span class="go">ZL2:  120</span>
<span class="go">ZL3:  120</span>
<span class="go">ZL4:  120</span>
<span class="go">scaledByNS:  no</span>
<span class="go">scaledByRG:  no</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">bruker_utils.</span></span><span class="sig-name descname"><span class="pre">BrukerDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bruker_utils.BrukerDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Represenation of a Bruker Dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> – <p>Path to the directory containing the data.</p>
<p>Different files are expected to exist, dependent on the data type you
are importing (note that <code class="docutils literal notranslate"><span class="pre">..</span></code> denotes the parent directory of the
preceeding directory):</p>
<ul class="simple">
<li><p>1D data</p>
<ul>
<li><p>Raw FID</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/fid</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqus</span></code></p></li>
</ul>
</li>
<li><p>Processed data</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/1r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/procs</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>2D data</p>
<ul>
<li><p>Raw FID</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/ser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqu2s</span></code></p></li>
</ul>
</li>
<li><p>Processed data</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/2rr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqu2s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/procs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/proc2s</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>3D data</p>
<ul>
<li><p>Raw FID</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/ser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqu2s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/acqu3s</span></code></p></li>
</ul>
</li>
<li><p>Processed data</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/3rrr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqu2s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/../../acqu3s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/procs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/proc2s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directory/proc3s</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IOError</strong> – If <code class="docutils literal notranslate"><span class="pre">directory</span></code> doesn’t exist.</p></li>
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">directory</span></code> does not contain the files expected of a
    Bruker dataset. See the description of the class for details.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._all_paths_exist">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_all_paths_exist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._all_paths_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if all the paths in <code class="docutils literal notranslate"><span class="pre">files</span></code> exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>files</strong> – File paths to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>allexist</strong> – <code class="docutils literal notranslate"><span class="pre">True</span></code> is all paths exist, <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._compile_experiment_options">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_compile_experiment_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._compile_experiment_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate information dictionaries for different experiment types.</p>
<p>Compiles dictionaries of information relavent to each experiment type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> – Path to the directory of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>options</strong> – Infomation relating to each experiment option. Each item
is a dictionary with the following entires:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'files'</span></code> - The expected paths to data and parameter files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'dim'</span></code> - The data dimension.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'dtype'</span></code> - The type of data (time-domain or pdata).</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._complexify">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_complexify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._complexify" title="Permalink to this definition">¶</a></dt>
<dd><p>Make time-domain data complex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – Data to be converted to complex form.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>complex_data</strong> – Complex data.</p>
<p>Complex data is stored in the form
<code class="docutils literal notranslate"><span class="pre">[re[0],</span> <span class="pre">im[0],</span> <span class="pre">re[1],</span> <span class="pre">im[1],</span> <span class="pre">...]</span></code>, This function takes an
input with shape <code class="docutils literal notranslate"><span class="pre">(2N,)</span></code> and returns
<code class="docutils literal notranslate"><span class="pre">[re[0]</span> <span class="pre">+</span> <span class="pre">im[0]j,</span> <span class="pre">re[1]</span> <span class="pre">+</span> <span class="pre">im[1]j,</span> <span class="pre">...]</span></code> with shape <code class="docutils literal notranslate"><span class="pre">(N,)</span></code>.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._determine_experiment_type">
<span class="sig-name descname"><span class="pre">_determine_experiment_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._determine_experiment_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the type of Bruker data stored in <code class="docutils literal notranslate"><span class="pre">directory</span></code>.</p>
<p>This function is used to determine:</p>
<ol class="loweralpha simple">
<li><p>whether the specified data is time-domain or pdata</p></li>
<li><p>the dimension of the data (checks up to 3D).</p></li>
</ol>
<p>If the data satisfies the required criteria for a particular
experiment type, a dictionary of information will be returned.
Otherwise, <code class="docutils literal notranslate"><span class="pre">None</span></code> will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> – The path to the directory of interest.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>exptype</strong> – Dictionary with the entries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'dim'</span></code> (<code class="docutils literal notranslate"><span class="pre">int</span></code>) The dimension of the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'dtype'</span></code> (<code class="docutils literal notranslate"><span class="pre">'fid'</span></code> or <code class="docutils literal notranslate"><span class="pre">'pdata'</span></code>) The type of data (raw
time-domain or pdata).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'files'</span></code> (<code class="docutils literal notranslate"><span class="pre">List[pathlib.Path]</span></code>) Paths to data and parameter
files.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[dict, None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._remove_zeros">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_remove_zeros</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._remove_zeros" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip zeros from data.</p>
<p>Bruker ensures that each stored FID takes up a multiple of 1024 bytes
of storage, even if <code class="docutils literal notranslate"><span class="pre">TD</span></code> is not a multiple of 256 (each datapoint
takes either 4 or 8 bytes of space). To do this, each FID is padded
with zeros. This function determines the number of trailing zeros
and removes them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – Data to be treated. This should be a one-dimensional array with
the number of elements matching the product of the elements in
<code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p></li>
<li><p><strong>shape</strong> – The expected shape of the data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>zeroless_data</strong> – Data with padded zeros removed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset._repartition_data">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_repartition_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">si</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xdim</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset._repartition_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Correctly reorganise partitioned data.</p>
<p>Some data (typically older data) is stored in <cite>sub-matrix</cite> format,
such that chucnks of the data are partitioned into smaller blocks.
The <code class="docutils literal notranslate"><span class="pre">XDIM</span></code> parameters in the <code class="docutils literal notranslate"><span class="pre">procs</span></code> files dictate the size of
each partition. This function takes in partitioned data and
re-arranges it to the correct order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – Data to be repartitioned. This should be a one-dimensional array
with the number of elements matching the product of the elements
in <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p></li>
<li><p><strong>si</strong> – The expected shapoe of the data.</p></li>
<li><p><strong>xdim</strong> – The size of partitions in each dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>repartitioned_data</strong> – Correctly repartitioned data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.binary_format">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">binary_format</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.binary_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the format of the binary datafiles.</p>
<p>Four possibilities:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'&lt;i4'</span></code> - Little endian, 32-bit integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'&gt;i4'</span></code> - Big endian, 32-bit integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'&lt;f8'</span></code> - Little endian, 64-bit float.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'&gt;f8'</span></code> - Big endian, 64-bit float.</p></li>
</ul>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.contours">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">contours</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.contours" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a stored list of contour levels.</p>
<p>For multidimensional processed datasets, the file <code class="docutils literal notranslate"><span class="pre">clevels</span></code> is
searched for, and if found, the contour levels stated in it are
returned. If <code class="docutils literal notranslate"><span class="pre">clevels</span></code> could not be found, <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.data">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the data.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.dim">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dim</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of experiment dimensions.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.directory">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">directory</span></span><em class="property"><span class="pre">:</span> <span class="pre">pathlib.Path</span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the full path to the data directory.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.dtype">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the type of data.</p>
<p>Will be either <code class="docutils literal notranslate"><span class="pre">'fid'</span></code> or <code class="docutils literal notranslate"><span class="pre">'pdata'</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.get_parameters">
<span class="sig-name descname"><span class="pre">get_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filenames</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset.get_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return parameters found in <code class="docutils literal notranslate"><span class="pre">filenames</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filenames</strong> – Files to extract parameters from. If this is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>,
all valid files will be read.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>params</strong> – A dictionary containing the parameters of each file in
sub-dictionaries.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">filenames</span></code> has an invalid type. It should be <code class="docutils literal notranslate"><span class="pre">None</span></code>, a
    <code class="docutils literal notranslate"><span class="pre">str</span></code>, or an iterable object (<code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>,
    etc.) of <code class="docutils literal notranslate"><span class="pre">str</span></code> objects.</p></li>
<li><p><strong>ValueError</strong> – If at least one value in <code class="docutils literal notranslate"><span class="pre">filenames</span></code> is invalid.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To determine the list of valid names for <code class="docutils literal notranslate"><span class="pre">filenames</span></code>, you can
use <a class="reference internal" href="#bruker_utils.BrukerDataset.valid_parameter_filenames" title="bruker_utils.BrukerDataset.valid_parameter_filenames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">valid_parameter_filenames()</span></code></a>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bruker_utils</span> <span class="k">as</span> <span class="nn">butils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This is a 2-dimensional processed dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">butils</span><span class="o">.</span><span class="n">BrukerDataset</span><span class="p">(</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">valid_parameter_filenames</span><span class="p">)</span>
<span class="go">[&#39;acqus&#39;, &#39;acqu2s&#39;, &#39;procs&#39;, &#39;proc2s&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.get_samples">
<span class="sig-name descname"><span class="pre">get_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pdata_unit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'ppm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meshgrid</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#bruker_utils.BrukerDataset.get_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the points at which the data is sampled.</p>
<p>For time-domain data, this will return the timepoints at which the
FID was sampeld. For processed data, this will return the chemical
shifts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdata_unit</strong> – The unit to expressed the chemical shifts if, if the dataset
corresponds to processed data. Valid options are <code class="docutils literal notranslate"><span class="pre">'ppm'</span></code> or
<code class="docutils literal notranslate"><span class="pre">'hz'</span></code>.</p></li>
<li><p><strong>meshgrid</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, samples for multidimensional experiments will be
arrayed using
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.meshgrid.html">numpy.meshgrid</a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>samples</strong> – The samples in each dimension.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterable[np.ndarray]</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For data with more than 1 dimension, the returned object is a list
of arrays with the same shape as the data, formed by using
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.meshgrid.html">numpy.meshgrid</a>,
making the output very convienient for plotting pourposes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="bruker_utils.BrukerDataset.valid_parameter_filenames">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">valid_parameter_filenames</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bruker_utils.BrukerDataset.valid_parameter_filenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of parameter filenames.</p>
<p>The elements are a complete set of the valid strings for the
<code class="docutils literal notranslate"><span class="pre">filenames</span></code> argument in <a class="reference internal" href="#bruker_utils.BrukerDataset.get_parameters" title="bruker_utils.BrukerDataset.get_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_parameters()</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">bruker_utils</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using bruker_utils</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="usage.html" title="previous chapter">Using bruker_utils</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Simon Hulse.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/content/reference.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>